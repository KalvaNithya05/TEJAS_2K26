
TRANSLATIONS = {
    'hi': {
        # Crops
        'rice': 'चावल', 'maize': 'मक्का', 'cotton': 'कपास', 'chickpea': 'चना',
        'kidneybeans': 'राजमा', 'pigeonpeas': 'अरहर', 'mothbeans': 'मोठ बीन',
        'mungbean': 'मूंग', 'blackgram': 'उड़द', 'lentil': 'मसूर',
        'pomegranate': 'अनार', 'banana': 'केला', 'mango': 'आम', 'grapes': 'अंगूर',
        'watermelon': 'तरबूज', 'muskmelon': 'खरबूजा', 'apple': 'सेब',
        'orange': 'संतरा', 'papaya': 'पपीता', 'coconut': 'नारियल', 'jute': 'जूट',
        'coffee': 'कॉफी', 'paddy': 'धान', 'wheat': 'गेहूं',
        # Fertilizer
        'urea': 'यूरिया', 'dap': 'डीएपी', 'mop': 'एमओपी', 'balanced npk': 'संतुलित एनपीके',
        # Disease
        'healthy': 'स्वस्थ', 'blight': 'झुलसा', 'rot': 'सड़न', 'scab': 'स्कैब', 'rust': 'रतुआ',
        'mold': 'फफूंद', 'virus': 'वायरस', 'spot': 'धब्बा', 'mite': 'मकड़ी',
        # UI
        'predicted_crop': 'अनुमानित फसल', 'confidence_score': 'विश्वास स्कोर',
        'fertilizer': 'उर्वरक', 'yield': 'उपज', 'recommendation': 'सिफारिश'
    },
    'te': {
        # Crops
        'rice': 'వరి', 'maize': 'మొక్కజొన్న', 'cotton': 'పత్తి', 'chickpea': 'శనగలు',
        'kidneybeans': 'రాజ్మా', 'pigeonpeas': 'కంది', 'mothbeans': 'అలసందలు',
        'mungbean': 'పెసలు', 'blackgram': 'మినుములు', 'lentil': 'ఎర్ర కంది',
        'pomegranate': 'దానిమ్మ', 'banana': 'అరటి', 'mango': 'మామిడి', 'grapes': 'ద్రాక్ష',
        'watermelon': 'పుచ్చకాయ', 'muskmelon': 'కర్బూజా', 'apple': 'యాపిల్',
        'orange': 'నారింజ', 'papaya': 'బొప్పాయి', 'coconut': 'కొబ్బరి', 'jute': 'జనుము',
        'coffee': 'కాఫీ', 'paddy': 'వరి', 'wheat': 'గోధుమ',
        # Fertilizer
        'urea': 'యూరియా', 'dap': 'డిఏపి', 'mop': 'ఎంఓపి', 'balanced npk': 'సమతుల్య ఎన్పికె',
        # Disease
        'healthy': 'ఆరోగ్యకరమైనది', 'blight': 'మాడు తెగులు', 'rot': 'కుళ్లు', 'scab': 'పొక్కు',
        'rust': 'తుప్పు తెగులు', 'mold': 'బూజు', 'virus': 'వైరస్', 'spot': 'మచ్చ', 'mite': 'నల్లి',
        # UI
        'predicted_crop': 'అంచనా వేసిన పంట', 'confidence_score': 'నమ్మక స్కోరు',
        'fertilizer': 'ఎరువులు', 'yield': 'దిగుబడి', 'recommendation': 'సిఫార్సు'
    },
    'ta': {
        'rice': 'அரிசி', 'maize': 'சோளம்', 'cotton': 'பருத்தி', 'paddy': 'நெல்',
        'wheat': 'கோதுமை', 'banana': 'வாழை', 'mango': 'மாம்பழம்', 'coconut': 'தேங்காய்',
        'fertilizer': 'உரம்', 'yield': 'மகசூல்', 'healthy': 'ஆரோக்கியமானது'
    },
    'kn': {
        'rice': 'ಅಕ್ಕಿ', 'maize': 'ಮೆಕ್ಕೆಜೋಳ', 'cotton': 'ಹತ್ತಿ', 'paddy': 'ಭತ್ತ',
        'wheat': 'ಗೋಧಿ', 'banana': 'ಬಾಳೆಹಣ್ಣು', 'mango': 'ಮಾವಿನ ಹಣ್ಣು', 'coconut': 'ತೆಂಗಿನಕಾಯಿ',
        'fertilizer': 'ಗೊಬ್ಬರ', 'yield': 'ಇಳುವರಿ', 'healthy': 'ಆರೋಗ್ಯಕರ'
    },
    'ml': {
        # Crops
        'rice': 'അരി', 'maize': 'ചോളം', 'cotton': 'പരുത്തി', 'chickpea': 'കടല',
        'pigeonpeas': 'തുവര', 'mungbean': 'ചെറുപയർ', 'blackgram': 'ഉഴുന്ന്',
        'pomegranate': 'മാതളനാരങ്ങ', 'banana': 'വാഴപ്പഴം', 'mango': 'മാമ്പഴം', 
        'grapes': 'മുന്തിരി', 'watermelon': 'തണ്ണിമത്തൻ', 'apple': 'ആപ്പിൾ',
        'orange': 'ഓറഞ്ച്', 'papaya': 'പപ്പായ', 'coconut': 'തേങ്ങ', 'jute': 'ചണം',
        'coffee': 'കാപ്പി', 'paddy': 'നെല്ല്', 'wheat': 'ഗോതമ്പ്',
        # Fertilizer
        'urea': 'യൂറിയ', 'dap': 'ഡിഎപി', 'mop': 'എംഒപി', 'balanced npk': 'സന്തുലിത എൻപികെ',
        # Disease
        'healthy': 'ആരോഗ്യകരമായ', 'blight': 'ബ്ലൈറ്റ്', 'rot': 'അഴുകൽ', 'scab': 'സ്കാബ്', 
        'rust': 'തുരുമ്പ്', 'mold': 'പൂപ്പൽ', 'virus': 'വൈറസ്', 'spot': 'പുള്ളി', 'mite': 'ചെള്ള്',
        # UI
        'predicted_crop': 'പ്രവചിച്ച വിള', 'confidence_score': 'വിശ്വാസ സ്കോർ',
        'fertilizer': 'വളം', 'yield': 'വിളവ്', 'recommendation': 'ശുപാർശ'
    }
}

def translate_text(text, lang='en'):
    if not text or lang == 'en':
        return text
    
    # Handle phrases by translating parts if they contain underscores/dashes or spaces
    text_lower = str(text).lower().strip()
    
    # 1. Direct match
    if lang in TRANSLATIONS and text_lower in TRANSLATIONS[lang]:
        return TRANSLATIONS[lang][text_lower]
    
    # 2. Heuristic for disease names like "Tomato_Bacterial_spot"
    # Try to translate individual components
    if '_' in text_lower:
        parts = text_lower.split('_')
        trans_parts = [translate_text(p, lang) for p in parts]
        return " ".join(trans_parts).capitalize()

    return text

def translate_response(response_dict, lang='en'):
    """
    Placeholder for deep translation if needed. For now we translate
    specific fields in the ML output generators directly.
    """
    return response_dict
